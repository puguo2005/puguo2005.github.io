(window.webpackJsonp=window.webpackJsonp||[]).push([[31,124,141,332,390],{1066:function(e,t,i){e.exports=i.p+"img/triangle.85791b6.webp"},1070:function(e,t,i){e.exports={}},1082:function(e,t,i){"use strict";i.r(t);var l={props:{vueinstance:{type:Object,required:!0},url:{type:String,default:""},qrUrl:{type:String,required:!1},onClose:{type:Function,default:null},onUseTemplate:{type:Function,default:null},onShowDetail:{type:Function,default:null}},data:()=>({visible:!1,loading:!0}),mounted(){this.visible=!0},watch:{"vueinstance.$route":{handler(){this.handleHidden()}}},methods:{handleHidden(){this.visible=!1},handleClose(){this.onClose&&this.onClose()},handleLoaded(){this.loading=!1},handleUse(){var e;this.handleClose(),null===(e=this.onUseTemplate)||void 0===e||e.call(this)},handleShowDetail(){var e;this.handleClose(),null===(e=this.onShowDetail)||void 0===e||e.call(this)}}},s=(i(1132),i(0)),o=Object(s.a)(l,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"660px","custom-class":"template-preview-dialog",visible:e.visible,"destroy-on-close":!0,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{closed:e.handleClose}},[t("div",{staticClass:"template-preview-inner"},[t("div",{staticClass:"preview-main"},[t("div",{staticClass:"iframe-box"},[t("iframe",{attrs:{frameborder:"0",src:e.url},on:{load:e.handleLoaded}})]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"preview-loading"},[t("div",{staticClass:"loading-inner"},[t("i",{staticClass:"el-icon-loading"})])])]),e._v(" "),t("div",{staticClass:"preview-code"},[t("staticqr-vue-qr",{attrs:{text:e.qrUrl||e.url,size:176}}),e._v(" "),t("div",{staticClass:"text"},[e._v("微信扫码预览")]),e._v(" "),e.onUseTemplate?t("button",{staticClass:"button",on:{click:e.handleUse}},[e._v("\n        使用此模板\n      ")]):e._e(),e._v(" "),e.onShowDetail?t("div",{staticClass:"detail",on:{click:e.handleShowDetail}},[e._v("\n        模板详情>\n      ")]):e._e()],1),e._v(" "),t("div",{staticClass:"preview-close",on:{click:e.handleHidden}},[t("img",{attrs:{src:i(515)}})])])])}),[],!1,null,"c47c1e04",null);t.default=o.exports;installComponents(o,{StaticqrVueQr:i(125).default})},1113:function(e,t,i){"use strict";i.r(t);var l=i(6),s=i(4),o=i(1082),a={props:{visible:{type:Boolean,default:!1},tid:{type:String,default:""},vip:{type:Number,default:0},h5:{type:Number,default:0},form:{type:Object,default:null},short:{type:String,default:""},sign:{type:String,default:""},decorate:{type:Object,default:null},appendToBody:{type:Boolean,default:!1},showQRCode:{type:Boolean,default:!0},showQRInfo:{type:Boolean,default:!1}},data:()=>({previewUrl:"",qrUrl:"",dialogInstance:null}),computed:{isShowDetail(){return l.b.includes(this.tid)}},watch:{visible(e,t){e&&this.tid&&this.initUrl()},tid(e){this.visible&&e&&this.initUrl()}},methods:{initUrl(){if(this.dialogInstance)return;const e=this.form?l.g:l.h;this.visible&&this.tid&&(this.qrUrl=1==this.h5?`${this.short}?h5sign=${this.sign}&preview=1`:`${e}?pid=${this.tid}&h5=${this.h5}&t=${Date.now()}&preview=1`,this.previewUrl=`${e}?pid=${this.tid}&h5=${this.h5}&t=${Date.now()}&preview=1`),this.dialogInstance=Object(s.e)(o.default,{vueinstance:this,url:this.previewUrl,qrUrl:this.qrUrl,onUseTemplate:this.h5?null:()=>{this.handleUse()},onShowDetail:!this.h5&&this.isShowDetail?()=>{this.handleDetail()}:null,onClose:()=>{this.dialogInstance.remove(),this.dialogInstance=null,this.handleClose()}})},handleClose(){this.$emit("close")},handleUse(){this.postCollection("h5_template_preview_use"),this.handleClose(),this.$emit("useTpl",{tid:this.tid,vip:this.vip,confirm:!1})},handleDetail(){this.postCollection("h5_template_preview_detail"),window.open(`/templates/detail?tid=${this.tid}`,"_blank")}}},n=i(0),d=Object(n.a)(a,(function(){return(0,this._self._c)("span")}),[],!1,null,null,null);t.default=d.exports},1132:function(e,t,i){"use strict";i(1070)},1202:function(e,t,i){e.exports={}},1319:function(e,t,i){"use strict";i(1202)},1329:function(e,t,i){"use strict";i.r(t);var l={props:{info:{type:Object,required:!0}},methods:{handleClick(){this.$emit("click",this.info)},handlePreview(e){e.stopPropagation(),this.$emit("preview",this.info)},handleUse(e){e.stopPropagation(),this.$emit("use",this.info)}}},s=(i(1319),i(0)),o=Object(s.a)(l,(function(){var e,t,l,s,o,a,n,d,r,c,h=this,p=h._self._c;return p("div",{staticClass:"example-item",on:{click:h.handleClick}},[p("img",{staticClass:"example-image",attrs:{src:null!==(e=null===(t=h.info)||void 0===t?void 0:t.img_url)&&void 0!==e?e:""}}),h._v(" "),p("div",{class:{"example-info":!0,"example-info-form":null===(l=h.info)||void 0===l?void 0:l.type}},[p("div",{class:{"footer-title":!0,"footer-title-form":null===(s=h.info)||void 0===s?void 0:s.type}},[p("span",{staticClass:"footer-title-text"},[h._v(h._s(null!==(o=null===(a=h.info)||void 0===a?void 0:a.title)&&void 0!==o?o:""))]),h._v(" "),p("img",{staticClass:"mark",attrs:{src:i(516)}})]),h._v(" "),p("div",{class:{"footer-desc":!0,"footer-desc-form":null===(n=h.info)||void 0===n?void 0:n.type}},[h._v("\n      "+h._s(null!==(d=null===(r=h.info)||void 0===r?void 0:r.desc)&&void 0!==d?d:"")+"\n    ")])]),h._v(" "),p("div",{class:{"footer-actions":!0,"footer-actions-form":null===(c=h.info)||void 0===c?void 0:c.type}},[p("el-button",{staticClass:"btn",on:{click:h.handlePreview}},[h._v("\n      预览\n    ")]),h._v(" "),p("el-button",{staticClass:"btn primary",attrs:{type:"primary"},on:{click:h.handleUse}},[h._v("\n      使用模板\n    ")])],1)])}),[],!1,null,"b9085ac2",null);t.default=o.exports},1584:function(e,t,i){e.exports={}},1656:function(e,t,i){"use strict";i(1584)},1659:function(e,t,i){"use strict";i.r(t);var l={props:{vueinstance:{type:Object,required:!0},url:{type:String,default:""},onClose:{type:Function,default:null},onUseTemplate:{type:Function,default:null}},data:()=>({visible:!1,loading:!0,formHeight:0}),mounted(){this.visible=!0},computed:{canUse(){return null!==this.onUseTemplate&&void 0!==this.onUseTemplate}},watch:{"vueinstance.$route":{handler(){this.handleHidden()}}},methods:{handleHidden(){this.visible=!1},handleClose(){this.onClose&&this.onClose()},handleUse(){var e;this.handleClose(),null===(e=this.onUseTemplate)||void 0===e||e.call(this)},handleLoaded(){this.loading=!1}}},s=(i(1656),i(0)),o=Object(s.a)(l,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"660px","custom-class":"form-preview-dialog",visible:e.visible,"destroy-on-close":!0,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{closed:e.handleClose}},[t("div",{staticClass:"form-preview-inner"},[t("div",{staticClass:"preview-main"},[t("div",{staticClass:"iframe-box"},[t("iframe",{attrs:{frameborder:"0",src:e.url},on:{load:e.handleLoaded}})]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"preview-loading"},[t("div",{staticClass:"loading-inner"},[t("i",{staticClass:"el-icon-loading"})])])]),e._v(" "),t("div",{staticClass:"preview-code",class:{short:!e.canUse}},[t("staticqr-vue-qr",{attrs:{text:e.url,size:176}}),e._v(" "),t("div",{staticClass:"text"},[e._v("微信扫码预览")]),e._v(" "),e.canUse?t("button",{staticClass:"button",on:{click:e.handleUse}},[e._v("\n        使用此模板\n      ")]):e._e()],1),e._v(" "),t("div",{staticClass:"preview-close",on:{click:e.handleHidden}},[t("img",{attrs:{src:i(515)}})])])])}),[],!1,null,"3858ef72",null);t.default=o.exports;installComponents(o,{StaticqrVueQr:i(125).default})},2402:function(e,t,i){"use strict";i.r(t);var l=i(49),s=i(32),o=i(1659),a=i(4),n={data:()=>({loading:!0,searchKey:"",tpGroup:[],tpDatas:[],tpList:[],formList:[],unfolds:[],previewVisible:!1,pid:"",vip:0,formModules:["表单","问卷调查","活动报名","在线考试"],loginDialogVisible:!1,showMobileVisible:!1,selectedItem:{}}),computed:{tpListMap(){const e=new Map;return this.tpGroup.forEach((t=>{let i=this.tpList.filter((e=>{var i;return(null!==(i=e.category)&&void 0!==i?i:"其他行业")===t.label})),l=this.formList.filter((e=>e.scene_id===this.formModules.indexOf(t.label)));l.length>0&&this.supplyFormList(l,t.label);const{more:s,list:o}=this.selectFiveModules(0==i.length?l:i,t.label);o.length>0&&e.set(t.label,{more:s,newList:o})})),e}},mounted(){this.initData();const e=setInterval((()=>{this.loading||(clearInterval(e),this.judgeScrollTo())}),100)},methods:{async initData(){var e,t,i,s,o,a,n,d,r;const c=await this.get("/api/publicTpl/group"),h=await this.get("/api/publicTpl/spTpls?page=1&pagecount=500"),p=null!==(e=null===(t=(await this.get("/v2/form/getTplList")).data)||void 0===t?void 0:t.result)&&void 0!==e?e:[];p.forEach((e=>{e.url=`${window.location.origin}/table/preview?tid=${e.id}&token=${this.$store.state.token}`}));const u=null!==(i=null==c||null===(s=c.data)||void 0===s||null===(o=s.data)||void 0===o||null===(a=o.list)||void 0===a?void 0:a.category)&&void 0!==i?i:[],v=null!==(n=null==h||null===(d=h.data)||void 0===d||null===(r=d.data)||void 0===r?void 0:r.list)&&void 0!==n?n:[],f=Object(l.groupBy)(v,(e=>{var t;return null!==(t=e.category)&&void 0!==t?t:"其他行业"})),m=Object(l.groupBy)(p,(e=>this.formModules[e.scene_id]));this.tpDatas=v,this.tpList=Object(l.cloneDeep)(v),this.formList=Object(l.cloneDeep)(p);const g=[];this.formModules.forEach((e=>{m[e]&&g.push({label:e,count:m[e].length})})),this.tpGroup=u.map((({name:e})=>{var t,i;return{label:e,count:null!==(t=null===(i=f[e])||void 0===i?void 0:i.length)&&void 0!==t?t:0}})).concat(g),this.loading=!1},selectFiveModules(e,t){let i=0;return e.length>5&&this.unfolds.every((e=>e!==t))&&(i=e.length-5,e=e.slice(0,5)),{more:i,list:e}},supplyFormList(e,t){e.forEach((e=>{e.category=t,e.title=e.name,e.type="form"}))},handleSearch(){let e=[];e=this.searchKey?this.tpDatas.filter((e=>e.title.indexOf(this.searchKey)>-1)):Object(l.cloneDeep)(this.tpDatas),this.unfolds=[],this.tpList=e},handleCreate(){this.postCollection("h5_templates_create_new"),this.openEditor({})},judgeScrollTo(){if(window.location.href.includes("scene_id")){let e=this.$route.query.scene_id;this.handleScrollTo(this.formModules[e])}},handleScrollTo(e){const t=document.querySelector(`[data-name=${e}]`);if(!t)return;const i=t.getBoundingClientRect();if(i.top<=120)return;let l=this.$refs.main.parentElement;l=""!==l.style.overflow?l:window,l.scrollTo({top:i.top-120,behavior:"smooth"})},handleShowMore(e){this.unfolds.push(e),this.unfolds=[...this.unfolds]},handleShowPreview(e){"form"==e.type?this.formHandlePreview(e):(this.postCollection("h5_templates_preview"),this.pid=e.pid,this.vip=e.vip,this.previewVisible=!0)},handleTemplateCollect(e){const t=["","questionnaire","application"];t[e.scene_id]&&this.postCollection(`template_form_${t[e.scene_id]}_concern_id${e.id}`)},handleLogin(){const e=document.body.offsetWidth;this.$store.state.token||(e<640?this.showMobileVisible=!0:this.loginDialogVisible=!0)},handleFormCardClick(e){"form"==e.type&&window.open(`${window.location.origin}/table/preview?tid=${e.id}`)},formHandlePreview(e){this.handleTemplateCollect(e);const t=Object(a.e)(o.default,{vueinstance:this,url:`${window.location.origin}/table/preview?tid=${e.id}&isMobile=true`,onClose:()=>{t.remove()},onUseTemplate:()=>{this.formHandleUse(e)}})},loginFunc(){window.open(`${window.location.origin}/table/workspace?tid=${this.selectedItem.id}&scene=${this.selectedItem.scene_id}&folderId=0`),this.loginDialogVisible=!1,this.showMobileVisible=!1},formHandleUse(e){var t;let i=null!==(t=this.$route.query.folderId)&&void 0!==t?t:0;this.selectedItem=e,this.$store.state.token?(this.handleTemplateCollect(e),window.open(`${window.location.origin}/table/workspace?tid=${e.id}&scene=${e.scene_id}&folderId=${i}`)):this.handleLogin()},handleHidePreview(){this.pid="",this.vip=0,this.previewVisible=!1},handleUse(e){var t;"form"==e.type?this.formHandleUse(e):(this.postCollection("h5_templates_use"),this.openEditor({tid:null!==(t=e.pid)&&void 0!==t?t:e.tid}))},handleFeedback(){this.postCollection("h5_templates_feed_back"),Object(s.a)({uid:this.$store.state.user.uid,$axios:{post:this.post,get:this.get},eacb:this.$store.state.token},this)}}},d=(i(2843),i(0)),r=Object(d.a)(n,(function(){var e=this,t=e._self._c;return t("div",{ref:"main",staticClass:"editor-example-list"},[t("p",{staticClass:"page-slogan"},[e._v("二维码行业应用方案，使用同行模板快速生成二维码")]),e._v(" "),t("div",{staticClass:"page-search"},[t("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入模板关键词"},on:{change:e.handleSearch},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}},[t("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"}),e._v(" "),t("el-button",{attrs:{slot:"append",type:"primary"},on:{click:e.handleSearch},slot:"append"},[e._v("\n        搜索模板\n      ")])],1)],1),e._v(" "),e.loading?e._e():t("div",{staticClass:"page-group"},[t("div",{staticClass:"item create",on:{click:e.handleCreate}},[t("i",{staticClass:"el-icon-plus icon"}),e._v(" "),t("div",{staticClass:"text"},[e._v("空白新建单码")])]),e._v(" "),e._l(e.tpGroup,(function(i){return t("div",{key:i.label,staticClass:"item",on:{click:function(t){return e.handleScrollTo(i.label)}}},[t("div",{staticClass:"name"},[e._v(e._s(i.label))]),e._v(" "),t("div",{staticClass:"count"},[e._v("\n        "+e._s(i.count)+"个模板\n        "),t("i",{staticClass:"el-icon-arrow-right rt"})])])}))],2),e._v(" "),!e.loading&&e.tpListMap.size>0?t("div",{staticClass:"page-example"},e._l([...e.tpListMap.keys()],(function(i){return t("div",{key:i,staticClass:"tpWrap"},[t("div",{staticClass:"title",attrs:{"data-name":i}},[e._v("\n        "+e._s(i)+"\n      ")]),e._v(" "),t("div",{staticClass:"list"},e._l(e.tpListMap.get(i).newList,(function(i){return t("div",{key:i.id,staticClass:"item"},[t("editor-library-example-item",{attrs:{info:i},on:{preview:e.handleShowPreview,use:e.handleUse,click:e.handleFormCardClick}})],1)})),0),e._v(" "),e.tpListMap.get(i).more>0?t("div",{staticClass:"more",on:{click:function(t){return e.handleShowMore(i)}}},[e._v("\n        展开其他"+e._s(e.tpListMap.get(i).more)+"个模板\n        "),t("i",{staticClass:"el-icon-arrow-down icon"})]):e._e()])})),0):e._e(),e._v(" "),e.loading?e._e():t("div",{staticClass:"page-footer"},[t("span",[e._v("没有想要的模板？赶快告诉我们吧")]),e._v(" "),t("span",{staticClass:"a",on:{click:e.handleFeedback}},[e._v("\n      提交需求\n    ")])]),e._v(" "),e.loading?t("div",{staticClass:"page-loading"},[t("img",{attrs:{src:i(1066),alt:"loading"}})]):e._e(),e._v(" "),t("dashboard-sqrcode-preview-tpl-phone",{attrs:{visible:e.previewVisible,tid:e.pid,vip:e.vip},on:{useTpl:e.handleUse,close:e.handleHidePreview}}),e._v(" "),t("the-login-wx",{attrs:{"dialog-visible":e.loginDialogVisible,callback:e.loginFunc},on:{closeLoginDialog:function(t){e.loginDialogVisible=!1}}}),e._v(" "),t("mobile-login",{attrs:{"dialog-visible":e.showMobileVisible,callback:e.loginFunc},on:{closeLoginDialog:function(t){e.showMobileVisible=!1}}})],1)}),[],!1,null,"96af1cf4",null);t.default=r.exports;installComponents(r,{EditorLibraryExampleItem:i(1329).default,DashboardSqrcodePreviewTplPhone:i(1113).default,TheLoginWx:i(126).default,MobileLogin:i(127).default})},2427:function(e,t,i){e.exports={}},2843:function(e,t,i){"use strict";i(2427)}}]);